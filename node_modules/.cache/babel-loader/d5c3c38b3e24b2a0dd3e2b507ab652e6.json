{"ast":null,"code":"import { NLPIntent } from './types/scene';\n\nvar MetadataSender =\n/** @class */\nfunction () {\n  function MetadataSender(scene) {\n    var _this = this;\n\n    this.scene = scene;\n    this._previousUrl = window.location.href;\n    this._observer = new MutationObserver(function () {\n      return _this.observeDocumentChanges();\n    });\n  }\n\n  MetadataSender.prototype.observeUrlChanges = function () {\n    this._observer.observe(document, {\n      subtree: true,\n      childList: true\n    });\n  };\n\n  MetadataSender.prototype.disconnect = function () {\n    this._observer.disconnect();\n  };\n\n  MetadataSender.prototype.send = function () {\n    var conversationVariables = {\n      personaId: this.scene.currentPersonaId,\n      text: NLPIntent.PAGE_METADATA,\n      variables: {\n        pageUrl: window.location.href.split('?')[0]\n      },\n      optionalArgs: {}\n    };\n    this.scene.sendRequest('conversationSend', conversationVariables);\n  };\n\n  MetadataSender.prototype.observeDocumentChanges = function () {\n    if (window.location.href !== this._previousUrl) {\n      // Update url to current one\n      this._previousUrl = window.location.href; // Send event\n\n      this.send();\n    }\n  };\n\n  return MetadataSender;\n}();\n\nexport { MetadataSender }; //# sourceMappingURL=MetadataSender.js.map","map":null,"metadata":{},"sourceType":"module"}