{"ast":null,"code":"var _jsxFileName = \"/Users/sofiaweinzierl/Desktop/sm-neuralseek-ibm/react-ui/src/components/ControlGroup/ControlGroup.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { useIdleTimer } from 'react-idle-timer';\nimport PropTypes from 'prop-types';\nimport Controls from './Controls';\nimport styles from './ControlGroup.module.scss';\nimport { setHideTranscript, resetTranscript } from '../../store/sm/index';\nimport { ibmCog } from '../../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ORCHESTRATION_URL = process.env.REACT_APP_ORCHESTRATION_URL;\nconst DEMONSTRATION_MODE = process.env.REACT_APP_DEMONSTRATION_MODE === 'true';\n\nconst ControlGroup = _ref => {\n  _s();\n\n  let {\n    activeCards,\n    dispatchHideTranscript,\n    transcript,\n    lastUserUtterance,\n    userSpeaking,\n    speechState,\n    browserId,\n    loading\n  } = _ref;\n  //state used for idle reset\n  const [userActiveTimeStamp, setUserActiveTimeStamp] = useState(0); //state used for controls\n\n  const [showControls, setShowControls] = useState(false);\n  const [hideControls, setHideControls] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  useEffect(() => {\n    if (!DEMONSTRATION_MODE) {\n      return;\n    }\n\n    let idleTimer = setTimeout(handleNewTopic, 140000);\n    return () => clearTimeout(idleTimer);\n  }, [transcript, lastUserUtterance, userSpeaking, speechState, userActiveTimeStamp]);\n\n  const handleNewTopic = () => {\n    console.log('handle new topic fired');\n\n    async function startNewTopic() {\n      console.log('axios ran');\n\n      try {\n        await axios.post(`${ORCHESTRATION_URL}/newTopic`, {\n          fn: 'newTopic',\n          id: browserId\n        });\n      } catch (err) {\n        console.log(`error from WATSON Reset api`, err);\n      }\n    }\n\n    startNewTopic();\n  };\n\n  const handleClick = () => {\n    if (loading) return;\n    setClicked(!clicked);\n    setHideControls(showControls);\n\n    if (showControls) {\n      setTimeout(() => {\n        setShowControls(!showControls);\n      }, 300);\n    } else {\n      setShowControls(!showControls);\n    }\n  }; //Hide transcript when card shows up\n\n\n  useEffect(() => {\n    if (activeCards.length > 0) {\n      dispatchHideTranscript(false);\n    }\n  }, [activeCards]);\n\n  const handleOnAction = () => {\n    setUserActiveTimeStamp(getLastActiveTime());\n  };\n\n  const {\n    getLastActiveTime\n  } = useIdleTimer({\n    onAction: handleOnAction,\n    events: ['mousemove', 'keydown', 'wheel', 'DOMMouseScroll', 'mousewheel', 'mousedown', 'touchstart', 'touchmove']\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [!clicked ? /*#__PURE__*/_jsxDEV(\"img\", {\n      className: `${styles.btn} ${styles.btn__clicked}`,\n      src: ibmCog,\n      alt: \"expand controls\",\n      onClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      className: styles.btn,\n      src: ibmCog,\n      alt: \"shrink controls\",\n      onClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this), showControls && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.controls__container,\n      children: /*#__PURE__*/_jsxDEV(Controls, {\n        hideControls: hideControls\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ControlGroup, \"qSiTdEqmu2bqKdnqhDCeJYtc4Wo=\", false, function () {\n  return [useIdleTimer];\n});\n\n_c = ControlGroup;\nControlGroup.propTypes = {\n  connected: PropTypes.bool.isRequired,\n  activeCards: PropTypes.array.isRequired,\n  dispatchHideTranscript: PropTypes.func.isRequired,\n  dispatchResetTranscript: PropTypes.func.isRequired,\n  transcript: PropTypes.arrayOf(PropTypes.object).isRequired,\n  lastUserUtterance: PropTypes.string.isRequired,\n  userSpeaking: PropTypes.bool.isRequired,\n  speechState: PropTypes.string.isRequired,\n  browserId: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  connected: state.sm.connected,\n  activeCards: state.sm.activeCards,\n  lastUserUtterance: state.sm.lastUserUtterance,\n  userSpeaking: state.sm.userSpeaking,\n  connected: state.sm.connected,\n  speechState: state.sm.speechState,\n  transcript: state.sm.transcript,\n  browserId: state.sm.browserId,\n  loading: state.sm.loading\n});\n\nconst mapDispatchToProps = dispatch => ({\n  dispatchResetTranscript: () => dispatch(resetTranscript()),\n  dispatchHideTranscript: showTranscript => dispatch(setHideTranscript({\n    showTranscript: showTranscript\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlGroup);\n\nvar _c;\n\n$RefreshReg$(_c, \"ControlGroup\");","map":{"version":3,"names":["React","useState","useEffect","axios","connect","useIdleTimer","PropTypes","Controls","styles","setHideTranscript","resetTranscript","ibmCog","ORCHESTRATION_URL","process","env","REACT_APP_ORCHESTRATION_URL","DEMONSTRATION_MODE","REACT_APP_DEMONSTRATION_MODE","ControlGroup","activeCards","dispatchHideTranscript","transcript","lastUserUtterance","userSpeaking","speechState","browserId","loading","userActiveTimeStamp","setUserActiveTimeStamp","showControls","setShowControls","hideControls","setHideControls","clicked","setClicked","idleTimer","setTimeout","handleNewTopic","clearTimeout","console","log","startNewTopic","post","fn","id","err","handleClick","length","handleOnAction","getLastActiveTime","onAction","events","container","btn","btn__clicked","controls__container","propTypes","connected","bool","isRequired","array","func","dispatchResetTranscript","arrayOf","object","string","mapStateToProps","state","sm","mapDispatchToProps","dispatch","showTranscript"],"sources":["/Users/sofiaweinzierl/Desktop/sm-neuralseek-ibm/react-ui/src/components/ControlGroup/ControlGroup.js"],"sourcesContent":["/* eslint-disable */\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { useIdleTimer } from 'react-idle-timer';\nimport PropTypes from 'prop-types';\nimport Controls from './Controls';\n\nimport styles from './ControlGroup.module.scss';\nimport { setHideTranscript, resetTranscript } from '../../store/sm/index';\nimport { ibmCog } from '../../config';\n\nconst ORCHESTRATION_URL = process.env.REACT_APP_ORCHESTRATION_URL;\nconst DEMONSTRATION_MODE = process.env.REACT_APP_DEMONSTRATION_MODE === 'true';\n\nconst ControlGroup = ({\n  activeCards,\n  dispatchHideTranscript,\n  transcript,\n  lastUserUtterance,\n  userSpeaking,\n  speechState,\n  browserId,\n  loading,\n}) => {\n  //state used for idle reset\n  const [userActiveTimeStamp, setUserActiveTimeStamp] = useState(0);\n  //state used for controls\n  const [showControls, setShowControls] = useState(false);\n  const [hideControls, setHideControls] = useState(false);\n  const [clicked, setClicked] = useState(false);\n\n  useEffect(() => {\n    if (!DEMONSTRATION_MODE) {\n      return;\n    }\n    let idleTimer = setTimeout(handleNewTopic, 140000);\n    return () => clearTimeout(idleTimer);\n  }, [transcript, lastUserUtterance, userSpeaking, speechState, userActiveTimeStamp]);\n\n  const handleNewTopic = () => {\n    console.log('handle new topic fired');\n    async function startNewTopic() {\n      console.log('axios ran');\n      try {\n        await axios.post(`${ORCHESTRATION_URL}/newTopic`, {\n          fn: 'newTopic',\n          id: browserId,\n        });\n      } catch (err) {\n        console.log(`error from WATSON Reset api`, err);\n      }\n    }\n    startNewTopic();\n  };\n\n  const handleClick = () => {\n    if (loading) return;\n    setClicked(!clicked);\n    setHideControls(showControls);\n    if (showControls) {\n      setTimeout(() => {\n        setShowControls(!showControls);\n      }, 300);\n    } else {\n      setShowControls(!showControls);\n    }\n  };\n\n  //Hide transcript when card shows up\n  useEffect(() => {\n    if (activeCards.length > 0) {\n      dispatchHideTranscript(false);\n    }\n  }, [activeCards]);\n\n  const handleOnAction = () => {\n    setUserActiveTimeStamp(getLastActiveTime());\n  };\n\n  const { getLastActiveTime } = useIdleTimer({\n    onAction: handleOnAction,\n    events: [\n      'mousemove',\n      'keydown',\n      'wheel',\n      'DOMMouseScroll',\n      'mousewheel',\n      'mousedown',\n      'touchstart',\n      'touchmove',\n    ],\n  });\n\n  return (\n    <div className={styles.container}>\n      {!clicked ? (\n        <img\n          className={`${styles.btn} ${styles.btn__clicked}`}\n          src={ibmCog}\n          alt='expand controls'\n          onClick={handleClick}\n        />\n      ) : (\n        <img\n          className={styles.btn}\n          src={ibmCog}\n          alt='shrink controls'\n          onClick={handleClick}\n        />\n      )}\n      {showControls && (\n        <div className={styles.controls__container}>\n          <Controls hideControls={hideControls} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nControlGroup.propTypes = {\n  connected: PropTypes.bool.isRequired,\n  activeCards: PropTypes.array.isRequired,\n  dispatchHideTranscript: PropTypes.func.isRequired,\n  dispatchResetTranscript: PropTypes.func.isRequired,\n  transcript: PropTypes.arrayOf(PropTypes.object).isRequired,\n  lastUserUtterance: PropTypes.string.isRequired,\n  userSpeaking: PropTypes.bool.isRequired,\n  speechState: PropTypes.string.isRequired,\n  browserId: PropTypes.string,\n};\n\nconst mapStateToProps = (state) => ({\n  connected: state.sm.connected,\n  activeCards: state.sm.activeCards,\n  lastUserUtterance: state.sm.lastUserUtterance,\n  userSpeaking: state.sm.userSpeaking,\n  connected: state.sm.connected,\n  speechState: state.sm.speechState,\n  transcript: state.sm.transcript,\n  browserId: state.sm.browserId,\n  loading: state.sm.loading,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchResetTranscript: () => dispatch(resetTranscript()),\n  dispatchHideTranscript: (showTranscript) =>\n    dispatch(setHideTranscript({ showTranscript: showTranscript })),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlGroup);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}