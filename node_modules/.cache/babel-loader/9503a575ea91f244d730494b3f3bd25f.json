{"ast":null,"code":"var _jsxFileName = \"/Users/sofiaweinzierl/Desktop/sm-neuralseek-ibm/react-ui/src/components/ControlGroup/Controls.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport ReactTooltip from 'react-tooltip';\nimport { Button, Modal } from 'react-bootstrap';\nimport { Microphone } from '@carbon/icons-react';\nimport dummyTOS from '../../termsConditions.js'; // import { createFormattedText } from '../../lang/utils'\n\nimport { mute, stopSpeaking, setShowTranscript, setShowTermsAndConditions, resetTranscript } from '../../store/sm/index';\nimport { transcriptBlue, transcriptWhite, muteOn, muteOff, resetBlue, resetWhite, termsBlue, termsWhite, stopBlue, stopWhite } from '../../config';\nimport breakpoints from '../../utils/breakpoints';\nimport { mediaStreamProxy } from '../../proxyVideo';\nimport styles from './ControlGroup.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ORCHESTRATION_URL = process.env.REACT_APP_ORCHESTRATION_URL;\nconst volumeMeterHeight = 24;\nconst volumeMeterMultiplier = 1.2;\nconst smallHeight = volumeMeterHeight;\nconst largeHeight = volumeMeterHeight * volumeMeterMultiplier;\n\nconst Controls = _ref => {\n  _s();\n\n  let {\n    translatedToolTips,\n    hideControls,\n    intermediateUserUtterance,\n    userSpeaking,\n    dispatchResetTranscript,\n    dispatchMute,\n    isMuted,\n    speechState,\n    dispatchStopSpeaking,\n    dispatchToggleShowTranscript,\n    showTranscript,\n    transcript,\n    videoWidth,\n    connected,\n    typingOnly,\n    showTermsAndConditions,\n    dispatchToggleShowTermsAndConditions,\n    browserId\n  } = _ref;\n  const [inputValue, setInputValue] = useState('');\n  const [inputFocused, setInputFocused] = useState(false);\n  const [volume, setVolume] = useState(0);\n  const isLarger = videoWidth >= breakpoints.md ? largeHeight : smallHeight;\n  const [responsiveVolumeHeight, setResponsiveVolumeHeight] = useState(isLarger);\n  const [mouseOver, setMouseOver] = useState({\n    transcript: false,\n    mute: false,\n    reset: false,\n    terms: false,\n    interrupt: false\n  });\n  const [active, setActive] = useState({\n    transcript: false,\n    mute: false,\n    terms: false\n  });\n  useEffect(() => {\n    //transcript icon\n    if (showTranscript || mouseOver['transcript']) {\n      setActive(prevState => {\n        return { ...prevState,\n          transcript: true\n        };\n      });\n    } else {\n      setActive(prevState => {\n        return { ...prevState,\n          transcript: false\n        };\n      });\n    } //mute icon\n\n\n    if (isMuted || mouseOver['mute']) {\n      setActive(prevState => {\n        return { ...prevState,\n          mute: true\n        };\n      });\n    } else {\n      setActive(prevState => {\n        return { ...prevState,\n          mute: false\n        };\n      });\n    } //terms icon\n\n\n    if (showTermsAndConditions || mouseOver['terms']) {\n      setActive(prevState => {\n        return { ...prevState,\n          terms: true\n        };\n      });\n    } else {\n      setActive(prevState => {\n        return { ...prevState,\n          terms: false\n        };\n      });\n    }\n  }, [showTranscript, isMuted, showTermsAndConditions, mouseOver]);\n\n  const handleMouseOver = (icon, state) => {\n    const result = {\n      [icon]: state\n    };\n    setMouseOver(prevState => {\n      return { ...prevState,\n        ...result\n      };\n    });\n  };\n\n  if (userSpeaking === true && inputValue !== '' && inputFocused === false) setInputValue(''); // code for handling IDLE session timeout below\n\n  useEffect(async () => {\n    if (connected && typingOnly === false) {\n      // credit: https://stackoverflow.com/a/64650826\n      let volumeCallback = null;\n      let audioStream;\n      let audioContext;\n      let audioSource;\n      let unmounted = false; // Initialize\n\n      try {\n        audioStream = mediaStreamProxy.getUserMediaStream();\n        audioContext = new AudioContext();\n        audioSource = audioContext.createMediaStreamSource(audioStream);\n        const analyser = audioContext.createAnalyser();\n        analyser.fftSize = 512;\n        analyser.minDecibels = -127;\n        analyser.maxDecibels = 0;\n        analyser.smoothingTimeConstant = 0.4;\n        audioSource.connect(analyser);\n        const volumes = new Uint8Array(analyser.frequencyBinCount);\n\n        volumeCallback = () => {\n          analyser.getByteFrequencyData(volumes);\n          let volumeSum = 0;\n          volumes.forEach(v => {\n            volumeSum += v;\n          }); // multiply value by 2 so the volume meter appears more responsive\n          // (otherwise the fill doesn't always show)\n\n          const averageVolume = volumeSum / volumes.length * 2; // Value range: 127 = analyser.maxDecibels - analyser.minDecibels;\n\n          setVolume(averageVolume > 127 ? 127 : averageVolume);\n        }; // runs every time the window paints\n\n\n        const volumeDisplay = () => {\n          window.requestAnimationFrame(() => {\n            if (!unmounted) {\n              volumeCallback();\n              volumeDisplay();\n            }\n          });\n        };\n\n        volumeDisplay();\n      } catch (e) {\n        console.log('volume: ', volume);\n        console.log('responsiveVolumeHeight: ', responsiveVolumeHeight);\n        console.error('Failed to initialize volume visualizer!', e);\n      }\n\n      return () => {\n        console.log('closing down the audio stuff'); // FIXME: tracking #79\n\n        unmounted = true;\n        audioContext.close();\n        audioSource.close();\n      };\n    }\n\n    return false;\n  }, [connected]);\n  useEffect(() => {\n    // check window width, if larger display then increase mic indicator size\n    if (videoWidth >= breakpoints.md) setResponsiveVolumeHeight(largeHeight);else setResponsiveVolumeHeight(smallHeight);\n  });\n  useEffect(() => {\n    ReactTooltip.rebuild();\n  });\n\n  const resetConvo = () => {\n    //functionality for clear out the transcript after reset buttom.\n    dispatchResetTranscript(); //axio calls for reset conversation WA session.\n\n    async function resetWatson() {\n      console.log('reset watson function called');\n      if (!browserId) return;\n\n      try {\n        await axios.post(`${ORCHESTRATION_URL}/reset`, {\n          fn: 'ResetConvo',\n          id: browserId\n        });\n      } catch (err) {\n        console.log(`error from WATSON Reset api`, err);\n      }\n    }\n\n    resetWatson();\n  }; // clear placeholder text on reconnect, sometimes the state updates won't propagate\n\n\n  const placeholder = intermediateUserUtterance === '' ? '' : intermediateUserUtterance; //const translatedTranscriptToolTip = intl.formatMessage({ id: 'icon.transcript' });\n\n  const transcriptButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: `${styles.transcript__btn} ${showTranscript ? styles['transcript__btn-active'] : ''} ${hideControls ? styles['transcript__btn-hide'] : ''}`,\n    \"aria-label\": \"Toggle Transcript\" // data-tip={translatedToolTips.transcript}\n    ,\n    \"data-tip\": \"Toggle Transcript\",\n    \"data-place\": \"top\",\n    onClick: dispatchToggleShowTranscript,\n    onMouseOver: () => handleMouseOver('transcript', true),\n    onMouseOut: () => handleMouseOver('transcript', false),\n    disabled: transcript.length === 0,\n    children: active['transcript'] ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: transcriptWhite,\n      alt: \"transcript button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: transcriptBlue,\n      alt: \"transcript button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this); //const translatedMuteToolTip = intl.formatMessage({ id: 'icon.mute' });\n\n\n  const muteButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: `${styles.mute__btn} ${isMuted ? styles['mute__btn-active'] : ''} ${hideControls ? styles['mute__btn-hide'] : ''}`,\n    \"aria-label\": \"Mute button\",\n    \"data-tip\": 'Mute',\n    \"data-place\": \"top\",\n    onMouseOver: () => handleMouseOver('mute', true),\n    onMouseOut: () => handleMouseOver('mute', false),\n    onClick: dispatchMute,\n    children: active['mute'] ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: muteOn,\n      alt: \"mute on\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 25\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: muteOff,\n      alt: \"mute off\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 62\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 5\n  }, this);\n\n  const resetConvoButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: `${styles.reset__btn} ${hideControls ? styles['reset__btn-hide'] : ''}`,\n    \"aria-label\": \"Reset Conversation\",\n    \"data-tip\": \"Reset Conversation\" // data-tip={translatedToolTips.reset}\n    ,\n    \"data-place\": \"top\",\n    onMouseOver: () => handleMouseOver('reset', true),\n    onMouseOut: () => handleMouseOver('reset', false),\n    onClick: resetConvo,\n    children: !mouseOver['reset'] ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: resetBlue,\n      alt: \"reset button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: resetWhite,\n      alt: \"reset button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 5\n  }, this);\n\n  const termsAndConditionsButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: `${styles.terms__btn} ${showTermsAndConditions ? styles['terms__btn-active'] : ''} ${hideControls ? styles['terms__btn-hide'] : ''}`,\n    \"aria-label\": \"View Terms and Conditions\",\n    \"data-tip\": \"View Terms and Conditions\" // data-tip={translatedToolTips.terms}\n    ,\n    \"data-place\": \"top\",\n    onMouseOver: () => handleMouseOver('terms', true),\n    onMouseOut: () => handleMouseOver('terms', false),\n    onClick: dispatchToggleShowTermsAndConditions,\n    children: !active['terms'] ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: termsBlue,\n      alt: \"display terms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: termsWhite,\n      alt: \"display terms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 5\n  }, this);\n\n  const interruptButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: `${styles.interrupt__btn} ${hideControls ? styles['interrupt__btn-hide'] : ''} ${speechState !== 'speaking' ? styles['interrupt__btn-disabled'] : ''}` //disabled={speechState !== 'speaking'}\n    ,\n    onClick: dispatchStopSpeaking,\n    \"data-tip\": \"Stop Speaking\" // data-tip={translatedToolTips.stop}\n    ,\n    \"data-place\": \"top\",\n    onMouseOver: () => handleMouseOver('interrupt', true),\n    onMouseOut: () => handleMouseOver('interrupt', false),\n    children: !mouseOver['interrupt'] ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: stopBlue,\n      alt: \"reset button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: stopWhite,\n      alt: \"reset button\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.controls_container,\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      show: showTermsAndConditions,\n      onHide: dispatchToggleShowTermsAndConditions,\n      size: \"xl\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Legal: Privacy/Terms & Conditions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: dummyTOS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: dispatchToggleShowTermsAndConditions,\n          children: \"test\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mb-3 display-flex justify-content-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `col-auto d-md-block d-block`,\n        children: transcriptButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `col-auto d-md-block d-block`,\n        children: muteButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `col-auto d-md-block d-block`,\n        children: resetConvoButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `col-auto d-md-block d-block`,\n        children: termsAndConditionsButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `col-auto d-md-block d-block`,\n        children: interruptButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 321,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Controls, \"Xg6h79N/vPp9Ca3kDj5GundqqWw=\");\n\n_c = Controls;\nControls.propTypes = {\n  intermediateUserUtterance: PropTypes.string.isRequired,\n  lastUserUtterance: PropTypes.string.isRequired,\n  userSpeaking: PropTypes.bool.isRequired,\n  dispatchMute: PropTypes.func.isRequired,\n  isMuted: PropTypes.bool.isRequired,\n  speechState: PropTypes.string.isRequired,\n  dispatchStopSpeaking: PropTypes.func.isRequired,\n  showTranscript: PropTypes.bool.isRequired,\n  showTermsAndConditions: PropTypes.bool.isRequired,\n  dispatchToggleShowTermsAndConditions: PropTypes.func.isRequired,\n  dispatchToggleShowTranscript: PropTypes.func.isRequired,\n  transcript: PropTypes.arrayOf(PropTypes.object).isRequired,\n  videoWidth: PropTypes.number.isRequired,\n  connected: PropTypes.bool.isRequired,\n  typingOnly: PropTypes.bool.isRequired\n};\n\nconst mapStateToProps = state => ({\n  intermediateUserUtterance: state.sm.intermediateUserUtterance,\n  lastUserUtterance: state.sm.lastUserUtterance,\n  userSpeaking: state.sm.userSpeaking,\n  connected: state.sm.connected,\n  isMuted: state.sm.isMuted,\n  speechState: state.sm.speechState,\n  showTranscript: state.sm.showTranscript,\n  showTermsAndConditions: state.sm.showTermsAndConditions,\n  transcript: state.sm.transcript,\n  videoWidth: state.sm.videoWidth,\n  typingOnly: state.sm.typingOnly,\n  browserId: state.sm.browserId\n});\n\nconst mapDispatchToProps = dispatch => ({\n  dispatchResetTranscript: () => dispatch(resetTranscript()),\n  dispatchMute: muteState => dispatch(mute(muteState)),\n  dispatchStopSpeaking: () => dispatch(stopSpeaking()),\n  dispatchToggleShowTranscript: () => dispatch(setShowTranscript()),\n  dispatchToggleShowTermsAndConditions: () => dispatch(setShowTermsAndConditions())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n\nvar _c;\n\n$RefreshReg$(_c, \"Controls\");","map":{"version":3,"names":["React","useEffect","useState","connect","axios","PropTypes","ReactTooltip","Button","Modal","Microphone","dummyTOS","mute","stopSpeaking","setShowTranscript","setShowTermsAndConditions","resetTranscript","transcriptBlue","transcriptWhite","muteOn","muteOff","resetBlue","resetWhite","termsBlue","termsWhite","stopBlue","stopWhite","breakpoints","mediaStreamProxy","styles","ORCHESTRATION_URL","process","env","REACT_APP_ORCHESTRATION_URL","volumeMeterHeight","volumeMeterMultiplier","smallHeight","largeHeight","Controls","translatedToolTips","hideControls","intermediateUserUtterance","userSpeaking","dispatchResetTranscript","dispatchMute","isMuted","speechState","dispatchStopSpeaking","dispatchToggleShowTranscript","showTranscript","transcript","videoWidth","connected","typingOnly","showTermsAndConditions","dispatchToggleShowTermsAndConditions","browserId","inputValue","setInputValue","inputFocused","setInputFocused","volume","setVolume","isLarger","md","responsiveVolumeHeight","setResponsiveVolumeHeight","mouseOver","setMouseOver","reset","terms","interrupt","active","setActive","prevState","handleMouseOver","icon","state","result","volumeCallback","audioStream","audioContext","audioSource","unmounted","getUserMediaStream","AudioContext","createMediaStreamSource","analyser","createAnalyser","fftSize","minDecibels","maxDecibels","smoothingTimeConstant","volumes","Uint8Array","frequencyBinCount","getByteFrequencyData","volumeSum","forEach","v","averageVolume","length","volumeDisplay","window","requestAnimationFrame","e","console","log","error","close","rebuild","resetConvo","resetWatson","post","fn","id","err","placeholder","transcriptButton","transcript__btn","muteButton","mute__btn","resetConvoButton","reset__btn","termsAndConditionsButton","terms__btn","interruptButton","interrupt__btn","controls_container","propTypes","string","isRequired","lastUserUtterance","bool","func","arrayOf","object","number","mapStateToProps","sm","mapDispatchToProps","dispatch","muteState"],"sources":["/Users/sofiaweinzierl/Desktop/sm-neuralseek-ibm/react-ui/src/components/ControlGroup/Controls.js"],"sourcesContent":["/* eslint-disable */\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport ReactTooltip from 'react-tooltip';\nimport { Button, Modal } from 'react-bootstrap';\nimport {Microphone} from '@carbon/icons-react';\nimport dummyTOS from '../../termsConditions.js';\n// import { createFormattedText } from '../../lang/utils'\nimport {\n  mute,\n  stopSpeaking,\n  setShowTranscript,\n  setShowTermsAndConditions,\n  resetTranscript,\n} from '../../store/sm/index';\nimport {\n  transcriptBlue,\n  transcriptWhite,\n  muteOn,\n  muteOff,\n  resetBlue,\n  resetWhite,\n  termsBlue,\n  termsWhite,\n  stopBlue,\n  stopWhite,\n} from '../../config';\nimport breakpoints from '../../utils/breakpoints';\nimport { mediaStreamProxy } from '../../proxyVideo';\nimport styles from './ControlGroup.module.scss';\n\nconst ORCHESTRATION_URL = process.env.REACT_APP_ORCHESTRATION_URL;\n\nconst volumeMeterHeight = 24;\nconst volumeMeterMultiplier = 1.2;\nconst smallHeight = volumeMeterHeight;\nconst largeHeight = volumeMeterHeight * volumeMeterMultiplier;\n\nconst Controls = ({\n  translatedToolTips,\n  hideControls,\n  intermediateUserUtterance,\n  userSpeaking,\n  dispatchResetTranscript,\n  dispatchMute,\n  isMuted,\n  speechState,\n  dispatchStopSpeaking,\n  dispatchToggleShowTranscript,\n  showTranscript,\n  transcript,\n  videoWidth,\n  connected,\n  typingOnly,\n  showTermsAndConditions,\n  dispatchToggleShowTermsAndConditions,\n  browserId,\n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const [inputFocused, setInputFocused] = useState(false);\n  const [volume, setVolume] = useState(0);\n  const isLarger = videoWidth >= breakpoints.md ? largeHeight : smallHeight;\n  const [responsiveVolumeHeight, setResponsiveVolumeHeight] = useState(isLarger);\n  const [mouseOver, setMouseOver] = useState({\n    transcript: false,\n    mute: false,\n    reset: false,\n    terms: false,\n    interrupt: false,\n  });\n  const [active, setActive] = useState({ transcript: false, mute: false, terms: false });\n\n  useEffect(() => {\n    //transcript icon\n    if (showTranscript || mouseOver['transcript']) {\n      setActive((prevState) => {\n        return { ...prevState, transcript: true };\n      });\n    } else {\n      setActive((prevState) => {\n        return { ...prevState, transcript: false };\n      });\n    }\n\n    //mute icon\n    if (isMuted || mouseOver['mute']) {\n      setActive((prevState) => {\n        return { ...prevState, mute: true };\n      });\n    } else {\n      setActive((prevState) => {\n        return { ...prevState, mute: false };\n      });\n    }\n\n    //terms icon\n    if (showTermsAndConditions || mouseOver['terms']) {\n      setActive((prevState) => {\n        return { ...prevState, terms: true };\n      });\n    } else {\n      setActive((prevState) => {\n        return { ...prevState, terms: false };\n      });\n    }\n  }, [showTranscript, isMuted, showTermsAndConditions, mouseOver]);\n\n  const handleMouseOver = (icon, state) => {\n    const result = { [icon]: state };\n    setMouseOver((prevState) => {\n      return { ...prevState, ...result };\n    });\n  };\n\n  if (userSpeaking === true && inputValue !== '' && inputFocused === false) setInputValue('');\n\n  // code for handling IDLE session timeout below\n\n  useEffect(async () => {\n    if (connected && typingOnly === false) {\n      // credit: https://stackoverflow.com/a/64650826\n      let volumeCallback = null;\n      let audioStream;\n      let audioContext;\n      let audioSource;\n      let unmounted = false;\n      // Initialize\n      try {\n        audioStream = mediaStreamProxy.getUserMediaStream();\n        audioContext = new AudioContext();\n        audioSource = audioContext.createMediaStreamSource(audioStream);\n        const analyser = audioContext.createAnalyser();\n        analyser.fftSize = 512;\n        analyser.minDecibels = -127;\n        analyser.maxDecibels = 0;\n        analyser.smoothingTimeConstant = 0.4;\n        audioSource.connect(analyser);\n        const volumes = new Uint8Array(analyser.frequencyBinCount);\n        volumeCallback = () => {\n          analyser.getByteFrequencyData(volumes);\n          let volumeSum = 0;\n          volumes.forEach((v) => {\n            volumeSum += v;\n          });\n          // multiply value by 2 so the volume meter appears more responsive\n          // (otherwise the fill doesn't always show)\n          const averageVolume = (volumeSum / volumes.length) * 2;\n          // Value range: 127 = analyser.maxDecibels - analyser.minDecibels;\n          setVolume(averageVolume > 127 ? 127 : averageVolume);\n        };\n        // runs every time the window paints\n        const volumeDisplay = () => {\n          window.requestAnimationFrame(() => {\n            if (!unmounted) {\n              volumeCallback();\n              volumeDisplay();\n            }\n          });\n        };\n        volumeDisplay();\n      } catch (e) {\n        console.log('volume: ', volume);\n        console.log('responsiveVolumeHeight: ', responsiveVolumeHeight);\n        console.error('Failed to initialize volume visualizer!', e);\n      }\n\n      return () => {\n        console.log('closing down the audio stuff');\n        // FIXME: tracking #79\n        unmounted = true;\n        audioContext.close();\n        audioSource.close();\n      };\n    }\n    return false;\n  }, [connected]);\n\n  useEffect(() => {\n    // check window width, if larger display then increase mic indicator size\n    if (videoWidth >= breakpoints.md) setResponsiveVolumeHeight(largeHeight);\n    else setResponsiveVolumeHeight(smallHeight);\n  });\n\n  useEffect(() => {\n    ReactTooltip.rebuild();\n  });\n\n  const resetConvo = () => {\n    //functionality for clear out the transcript after reset buttom.\n    dispatchResetTranscript();\n\n    //axio calls for reset conversation WA session.\n    async function resetWatson() {\n      console.log('reset watson function called');\n      if (!browserId) return;\n      try {\n        await axios.post(`${ORCHESTRATION_URL}/reset`, {\n          fn: 'ResetConvo',\n          id: browserId,\n        });\n      } catch (err) {\n        console.log(`error from WATSON Reset api`, err);\n      }\n    }\n    resetWatson();\n  };\n\n  // clear placeholder text on reconnect, sometimes the state updates won't propagate\n  const placeholder = intermediateUserUtterance === '' ? '' : intermediateUserUtterance;\n\n  //const translatedTranscriptToolTip = intl.formatMessage({ id: 'icon.transcript' });\n  const transcriptButton = (\n    <button\n      type='button'\n      className={`${styles.transcript__btn} ${\n        showTranscript ? styles['transcript__btn-active'] : ''\n      } ${hideControls ? styles['transcript__btn-hide'] : ''}`}\n      aria-label='Toggle Transcript'\n      // data-tip={translatedToolTips.transcript}\n      data-tip='Toggle Transcript'\n      data-place='top'\n      onClick={dispatchToggleShowTranscript}\n      onMouseOver={() => handleMouseOver('transcript', true)}\n      onMouseOut={() => handleMouseOver('transcript', false)}\n      disabled={transcript.length === 0}\n    >\n      {active['transcript'] ? (\n        <img src={transcriptWhite} alt='transcript button' />\n      ) : (\n        <img src={transcriptBlue} alt='transcript button' />\n      )}\n    </button>\n  );\n\n  //const translatedMuteToolTip = intl.formatMessage({ id: 'icon.mute' });\n\n  const muteButton = (\n    <button\n      type='button'\n      className={`${styles.mute__btn} ${isMuted ? styles['mute__btn-active'] : ''} ${\n        hideControls ? styles['mute__btn-hide'] : ''\n      }`}\n      aria-label='Mute button'\n      data-tip={'Mute'}\n      data-place='top'\n      onMouseOver={() => handleMouseOver('mute', true)}\n      onMouseOut={() => handleMouseOver('mute', false)}\n      onClick={dispatchMute}\n    >\n      {active['mute'] ? <img src={muteOn} alt='mute on' /> : <img src={muteOff} alt='mute off' />}\n    </button>\n  );\n\n  const resetConvoButton = (\n    <button\n      type='button'\n      className={`${styles.reset__btn} ${hideControls ? styles['reset__btn-hide'] : ''}`}\n      aria-label='Reset Conversation'\n      data-tip='Reset Conversation'\n      // data-tip={translatedToolTips.reset}\n      data-place='top'\n      onMouseOver={() => handleMouseOver('reset', true)}\n      onMouseOut={() => handleMouseOver('reset', false)}\n      onClick={resetConvo}\n    >\n      {!mouseOver['reset'] ? (\n        <img src={resetBlue} alt='reset button' />\n      ) : (\n        <img src={resetWhite} alt='reset button' />\n      )}\n    </button>\n  );\n\n  const termsAndConditionsButton = (\n    <button\n      type='button'\n      className={`${styles.terms__btn} ${\n        showTermsAndConditions ? styles['terms__btn-active'] : ''\n      } ${hideControls ? styles['terms__btn-hide'] : ''}`}\n      aria-label='View Terms and Conditions'\n      data-tip='View Terms and Conditions'\n      // data-tip={translatedToolTips.terms}\n      data-place='top'\n      onMouseOver={() => handleMouseOver('terms', true)}\n      onMouseOut={() => handleMouseOver('terms', false)}\n      onClick={dispatchToggleShowTermsAndConditions}\n    >\n      {!active['terms'] ? (\n        <img src={termsBlue} alt='display terms' />\n      ) : (\n        <img src={termsWhite} alt='display terms' />\n      )}\n    </button>\n  );\n\n  const interruptButton = (\n    <button\n      type='button'\n      className={`${styles.interrupt__btn} ${hideControls ? styles['interrupt__btn-hide'] : ''} ${\n        speechState !== 'speaking' ? styles['interrupt__btn-disabled'] : ''\n      }`}\n      //disabled={speechState !== 'speaking'}\n      onClick={dispatchStopSpeaking}\n      data-tip='Stop Speaking'\n      // data-tip={translatedToolTips.stop}\n      data-place='top'\n      onMouseOver={() => handleMouseOver('interrupt', true)}\n      onMouseOut={() => handleMouseOver('interrupt', false)}\n    >\n      {!mouseOver['interrupt'] ? (\n        <img src={stopBlue} alt='reset button' />\n      ) : (\n        <img src={stopWhite} alt='reset button' />\n      )}\n    </button>\n  );\n\n  return (\n    <div className={styles.controls_container}>\n      <Modal show={showTermsAndConditions} onHide={dispatchToggleShowTermsAndConditions} size='xl'>\n        <Modal.Header closeButton>\n          <Modal.Title>Legal: Privacy/Terms & Conditions</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{dummyTOS}</Modal.Body>\n        <Modal.Footer>\n          <Button variant='secondary' onClick={dispatchToggleShowTermsAndConditions}>\n            test\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <div className='row mb-3 display-flex justify-content-center'>\n        <div className={`col-auto d-md-block d-block`}>{transcriptButton}</div>\n        <div className={`col-auto d-md-block d-block`}>{muteButton}</div>\n        <div className={`col-auto d-md-block d-block`}>{resetConvoButton}</div>\n        <div className={`col-auto d-md-block d-block`}>{termsAndConditionsButton}</div>\n        <div className={`col-auto d-md-block d-block`}>{interruptButton}</div>\n        {/* <span> */}\n        {/*   <FormattedMessage id=\"icon.mute\" /> */}\n        {/* </span> */}\n      </div>\n    </div>\n  );\n};\n\nControls.propTypes = {\n  intermediateUserUtterance: PropTypes.string.isRequired,\n  lastUserUtterance: PropTypes.string.isRequired,\n  userSpeaking: PropTypes.bool.isRequired,\n  dispatchMute: PropTypes.func.isRequired,\n  isMuted: PropTypes.bool.isRequired,\n  speechState: PropTypes.string.isRequired,\n  dispatchStopSpeaking: PropTypes.func.isRequired,\n  showTranscript: PropTypes.bool.isRequired,\n  showTermsAndConditions: PropTypes.bool.isRequired,\n  dispatchToggleShowTermsAndConditions: PropTypes.func.isRequired,\n  dispatchToggleShowTranscript: PropTypes.func.isRequired,\n  transcript: PropTypes.arrayOf(PropTypes.object).isRequired,\n  videoWidth: PropTypes.number.isRequired,\n  connected: PropTypes.bool.isRequired,\n  typingOnly: PropTypes.bool.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  intermediateUserUtterance: state.sm.intermediateUserUtterance,\n  lastUserUtterance: state.sm.lastUserUtterance,\n  userSpeaking: state.sm.userSpeaking,\n  connected: state.sm.connected,\n  isMuted: state.sm.isMuted,\n  speechState: state.sm.speechState,\n  showTranscript: state.sm.showTranscript,\n  showTermsAndConditions: state.sm.showTermsAndConditions,\n  transcript: state.sm.transcript,\n  videoWidth: state.sm.videoWidth,\n  typingOnly: state.sm.typingOnly,\n  browserId: state.sm.browserId,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchResetTranscript: () => dispatch(resetTranscript()),\n  dispatchMute: (muteState) => dispatch(mute(muteState)),\n  dispatchStopSpeaking: () => dispatch(stopSpeaking()),\n  dispatchToggleShowTranscript: () => dispatch(setShowTranscript()),\n  dispatchToggleShowTermsAndConditions: () => dispatch(setShowTermsAndConditions()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}