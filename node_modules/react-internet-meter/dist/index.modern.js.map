{"version":3,"file":"index.modern.js","sources":["../src/components/alerts/index.js","../src/index.js"],"sourcesContent":["import React from 'react' \n\n\nconst Alert = ({txtMainHeading,customClassName,txtSubHeading,alertStyles}) => {\n    return (\n        <div className={`${alertStyles.alertDangerContainer} ${customClassName}`}>\n            <span className={alertStyles.alertDangerHeading}>{txtMainHeading}</span>\n            <span className={alertStyles.alertDangerInfo}>{txtSubHeading}</span>\n        </div>\n    )\n}\n\n\nexport {\n    Alert\n}","import React, { useEffect, useState } from 'react'\nimport styles from './styles.module.css'\n\nimport { Alert } from './components'\n\nexport const ReactInternetSpeedMeter = ({\n  txtMainHeading = 'Opps...',\n  outputType = 'alert',\n  customClassName,\n  pingInterval = 30000,\n  thresholdUnit = 'megabyte',\n  threshold = 7,\n  txtSubHeading = 'Diconnected from internet',\n  imageUrl,\n  downloadSize, //bytes\n  callbackFunctionOnNetworkDown = () => console.log('No callback on Network Down'),\n  callbackFunctionOnNetworkTest = () => console.log('No callback On Network test'),\n  callbackFunctionOnError = () => console.log('error in downloading image')\n}) => {\n  const [isNetworkDown, setisNetworkDown] = useState(false)\n  let intervalFun\n\n  window.addEventListener('offline', () => setisNetworkDown(true));\n  window.addEventListener('online', () => setisNetworkDown(false));\n\n  const startCalculating = () => {\n    return window.setTimeout(MeasureConnectionSpeed, pingInterval);\n  }\n\n  useEffect(() => {\n    intervalFun = startCalculating()\n    return () => window.clearInterval(intervalFun)\n  }, [])\n\n  const MeasureConnectionSpeed = () => {\n    var startTime, endTime;\n    var download = new Image();\n    startTime = (new Date()).getTime();\n\n    var cacheBuster = '?nnn=' + startTime;\n    download.src = imageUrl + cacheBuster;\n\n    download.onload = function (d) {\n      endTime = (new Date()).getTime();\n      showResults(startTime, endTime);\n    }\n\n    download.onerror = function (err, msg) {\n      console.log('err', err)\n      callbackFunctionOnError(err)\n      window.clearInterval(intervalFun)\n    }\n    startCalculating()\n  }\n\n  const showResults = (startTime, endTime) => {\n    const duration = (endTime - startTime) / 1000;\n\n    const bitsLoaded = downloadSize * 8;\n    const speedBps = (bitsLoaded / duration).toFixed(2);\n    const speedKbps = (speedBps / 1024).toFixed(2);\n    const speedMbps = (speedKbps / 1024).toFixed(2);\n\n    setNetworStatus(speedBps, speedKbps, speedMbps)\n  }\n\n  const setNetworStatus = (speedBps, speedKbps, speedMbps) => {\n    if (thresholdUnit === 'byte') {\n      if (speedBps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedBps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedBps)\n    }\n    else if (thresholdUnit === 'kilobyte') {\n      if (speedKbps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedKbps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedKbps)\n\n    }\n    else if (thresholdUnit === 'megabyte') {\n      if (speedMbps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedMbps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedMbps)\n\n    }\n    else {\n      console.log('Invalid thresholdUnit')\n    }\n  }\n\n  if (isNetworkDown) {\n    if (outputType === 'alert') {\n      return <Alert\n        alertStyles={styles}\n        customClassName={customClassName}\n        txtMainHeading={txtMainHeading}\n        txtSubHeading={txtSubHeading} />\n    }\n\n    return <div />\n  }\n  return <div />\n}\n"],"names":["Alert","txtMainHeading","customClassName","txtSubHeading","alertStyles","alertDangerContainer","alertDangerHeading","alertDangerInfo","ReactInternetSpeedMeter","outputType","pingInterval","thresholdUnit","threshold","imageUrl","downloadSize","callbackFunctionOnNetworkDown","console","log","callbackFunctionOnNetworkTest","callbackFunctionOnError","useState","isNetworkDown","setisNetworkDown","intervalFun","window","addEventListener","startCalculating","setTimeout","MeasureConnectionSpeed","useEffect","clearInterval","startTime","endTime","download","Image","Date","getTime","cacheBuster","src","onload","d","showResults","onerror","err","msg","duration","bitsLoaded","speedBps","toFixed","speedKbps","speedMbps","setNetworStatus","styles"],"mappings":";;;;AAGA,IAAMA,KAAK,GAAG,SAARA,KAAQ,OAAgE;AAAA,MAA9DC,cAA8D,QAA9DA,cAA8D;AAAA,MAA/CC,eAA+C,QAA/CA,eAA+C;AAAA,MAA/BC,aAA+B,QAA/BA,aAA+B;AAAA,MAAjBC,WAAiB,QAAjBA,WAAiB;AAC1E,sBACI;AAAK,IAAA,SAAS,EAAKA,WAAW,CAACC,oBAAjB,SAAyCH;AAAvD,kBACI;AAAM,IAAA,SAAS,EAAEE,WAAW,CAACE;AAA7B,KAAkDL,cAAlD,CADJ,eAEI;AAAM,IAAA,SAAS,EAAEG,WAAW,CAACG;AAA7B,KAA+CJ,aAA/C,CAFJ,CADJ;AAMH,CAPD;;ICEaK,uBAAuB,GAAG,SAA1BA,uBAA0B,OAajC;AAAA,iCAZJP,cAYI;AAAA,MAZJA,cAYI,oCAZa,SAYb;AAAA,6BAXJQ,UAWI;AAAA,MAXJA,UAWI,gCAXS,OAWT;AAAA,MAVJP,eAUI,QAVJA,eAUI;AAAA,+BATJQ,YASI;AAAA,MATJA,YASI,kCATW,KASX;AAAA,gCARJC,aAQI;AAAA,MARJA,aAQI,mCARY,UAQZ;AAAA,4BAPJC,SAOI;AAAA,MAPJA,SAOI,+BAPQ,CAOR;AAAA,gCANJT,aAMI;AAAA,MANJA,aAMI,mCANY,2BAMZ;AAAA,MALJU,QAKI,QALJA,QAKI;AAAA,MAJJC,YAII,QAJJA,YAII;AAAA,mCAHJC,6BAGI;AAAA,MAHJA,6BAGI,sCAH4B;AAAA,WAAMC,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAAN;AAAA,GAG5B;AAAA,oCAFJC,6BAEI;AAAA,MAFJA,6BAEI,uCAF4B;AAAA,WAAMF,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAAN;AAAA,GAE5B;AAAA,oCADJE,uBACI;AAAA,MADJA,uBACI,uCADsB;AAAA,WAAMH,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAAN;AAAA,GACtB;;AAAA,kBACsCG,QAAQ,CAAC,KAAD,CAD9C;AAAA,MACGC,aADH;AAAA,MACkBC,gBADlB;;AAEJ,MAAIC,WAAJ;AAEAC,EAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC;AAAA,WAAMH,gBAAgB,CAAC,IAAD,CAAtB;AAAA,GAAnC;AACAE,EAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC;AAAA,WAAMH,gBAAgB,CAAC,KAAD,CAAtB;AAAA,GAAlC;;AAEA,MAAMI,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,WAAOF,MAAM,CAACG,UAAP,CAAkBC,sBAAlB,EAA0ClB,YAA1C,CAAP;AACD,GAFD;;AAIAmB,EAAAA,SAAS,CAAC,YAAM;AACdN,IAAAA,WAAW,GAAGG,gBAAgB,EAA9B;AACA,WAAO;AAAA,aAAMF,MAAM,CAACM,aAAP,CAAqBP,WAArB,CAAN;AAAA,KAAP;AACD,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAMK,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC,QAAIG,SAAJ,EAAeC,OAAf;AACA,QAAIC,QAAQ,GAAG,IAAIC,KAAJ,EAAf;AACAH,IAAAA,SAAS,GAAI,IAAII,IAAJ,EAAD,CAAaC,OAAb,EAAZ;AAEA,QAAIC,WAAW,GAAG,UAAUN,SAA5B;AACAE,IAAAA,QAAQ,CAACK,GAAT,GAAezB,QAAQ,GAAGwB,WAA1B;;AAEAJ,IAAAA,QAAQ,CAACM,MAAT,GAAkB,UAAUC,CAAV,EAAa;AAC7BR,MAAAA,OAAO,GAAI,IAAIG,IAAJ,EAAD,CAAaC,OAAb,EAAV;AACAK,MAAAA,WAAW,CAACV,SAAD,EAAYC,OAAZ,CAAX;AACD,KAHD;;AAKAC,IAAAA,QAAQ,CAACS,OAAT,GAAmB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACrC5B,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmB0B,GAAnB;AACAxB,MAAAA,uBAAuB,CAACwB,GAAD,CAAvB;AACAnB,MAAAA,MAAM,CAACM,aAAP,CAAqBP,WAArB;AACD,KAJD;;AAKAG,IAAAA,gBAAgB;AACjB,GAnBD;;AAqBA,MAAMe,WAAW,GAAG,SAAdA,WAAc,CAACV,SAAD,EAAYC,OAAZ,EAAwB;AAC1C,QAAMa,QAAQ,GAAG,CAACb,OAAO,GAAGD,SAAX,IAAwB,IAAzC;AAEA,QAAMe,UAAU,GAAGhC,YAAY,GAAG,CAAlC;AACA,QAAMiC,QAAQ,GAAG,CAACD,UAAU,GAAGD,QAAd,EAAwBG,OAAxB,CAAgC,CAAhC,CAAjB;AACA,QAAMC,SAAS,GAAG,CAACF,QAAQ,GAAG,IAAZ,EAAkBC,OAAlB,CAA0B,CAA1B,CAAlB;AACA,QAAME,SAAS,GAAG,CAACD,SAAS,GAAG,IAAb,EAAmBD,OAAnB,CAA2B,CAA3B,CAAlB;AAEAG,IAAAA,eAAe,CAACJ,QAAD,EAAWE,SAAX,EAAsBC,SAAtB,CAAf;AACD,GATD;;AAWA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACJ,QAAD,EAAWE,SAAX,EAAsBC,SAAtB,EAAoC;AAC1D,QAAIvC,aAAa,KAAK,MAAtB,EAA8B;AAC5B,UAAIoC,QAAQ,GAAGnC,SAAf,EAA0B;AACxBU,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAP,QAAAA,6BAA6B,CAACgC,QAAD,CAA7B;AACD,OAHD,MAGO;AACLzB,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;;AACDJ,MAAAA,6BAA6B,CAAC6B,QAAD,CAA7B;AACD,KARD,MASK,IAAIpC,aAAa,KAAK,UAAtB,EAAkC;AACrC,UAAIsC,SAAS,GAAGrC,SAAhB,EAA2B;AACzBU,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAP,QAAAA,6BAA6B,CAACkC,SAAD,CAA7B;AACD,OAHD,MAGO;AACL3B,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;;AACDJ,MAAAA,6BAA6B,CAAC+B,SAAD,CAA7B;AAED,KATI,MAUA,IAAItC,aAAa,KAAK,UAAtB,EAAkC;AACrC,UAAIuC,SAAS,GAAGtC,SAAhB,EAA2B;AACzBU,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAP,QAAAA,6BAA6B,CAACmC,SAAD,CAA7B;AACD,OAHD,MAGO;AACL5B,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;;AACDJ,MAAAA,6BAA6B,CAACgC,SAAD,CAA7B;AAED,KATI,MAUA;AACHlC,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD;AACF,GAjCD;;AAmCA,MAAII,aAAJ,EAAmB;AACjB,QAAIZ,UAAU,KAAK,OAAnB,EAA4B;AAC1B,0BAAO,oBAAC,KAAD;AACL,QAAA,WAAW,EAAE2C,MADR;AAEL,QAAA,eAAe,EAAElD,eAFZ;AAGL,QAAA,cAAc,EAAED,cAHX;AAIL,QAAA,aAAa,EAAEE;AAJV,QAAP;AAKD;;AAED,wBAAO,gCAAP;AACD;;AACD,sBAAO,gCAAP;AACD,CA5GM;;;;"}